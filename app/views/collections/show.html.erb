<ul id="menu">    
  <li><%= link_to @database.name, database_path(@database.name) %></li>
</ul>  
  
<h1>Collection in <%= @database.name %></h1>
<div id="collection">
 <%= pluralize(@documents.count, "document") %>
</div>

<div id="create_collection_form">
  <form action="<%= database_collection_documents_path(@database.name, @collection.name) %>" method="post">    
    <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
    <%= text_area_tag :document, params[:document], :class => "json_editor" %>
    <%= submit_tag "Create", :class => "ui-state-default ui-corner-all" %>
  </form>    
</div>


<table id="collection_documents">  
  <tr>  
    <th>_id</th>  
    <% @columns.each do |value| -%>    
      <th><%= value.titleize %></th>  
    <% end -%> 
  </tr>
      
  <% @documents.each do |doc| -%>
    <tr>  
      <td><%= doc["_id"] %></td>   
      <% @columns.each do |value| -%>    
        <td><%= doc[value] %></td>  
      <% end -%> 
    </tr>    
  <% end -%>

</table>

<div id="collection_documents_url" class="hidden">
  <%= database_collection_documents_path(@database.name, @collection.name) %>
</div>

  <script type="text/javascript">
    $("#collection_documents").flexigrid({
  			url: "<%= database_collection_documents_path(@database.name, @collection.name) %>",
  			method: "get",
  			dataType: 'json',
  			sortable: true,
  			striped: false,
  			usepager: true,
  			title: "Documents",
  			useRp: true,
  			rp: 15,
  			width: 700,
  			height: 200
    });  
  </script>		
			
<!--
  <% @documents.each do |doc| -%>
    <ul>   
      <% doc.each do |key, value| -%>    
        <li><%= key %>: <%= value %></li>  
      <% end -%> 
    </ul>    
  <% end -%>
-->    